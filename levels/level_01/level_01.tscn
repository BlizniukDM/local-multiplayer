[gd_scene load_steps=15 format=3 uid="uid://b5nuflh4rs51f"]

[ext_resource type="Script" path="res://levels/level.gd" id="1_dd17a"]
[ext_resource type="Texture2D" uid="uid://chwbcf7n2ajtp" path="res://art/platforms/Platformer_spritesheet.png" id="1_txqch"]
[ext_resource type="Texture2D" uid="uid://bja0wl8tcw71c" path="res://art/backgrounds/background_01.png" id="2_6ek4l"]
[ext_resource type="PackedScene" uid="uid://dfsblpjkgqagr" path="res://player/elf/elf.tscn" id="2_8ws6k"]
[ext_resource type="PackedScene" uid="uid://cpmu7ud0rsifh" path="res://player/knight/knight.tscn" id="3_0go4c"]
[ext_resource type="Texture2D" uid="uid://bujx43rcy5b85" path="res://art/backgrounds/background_02.png" id="3_oa6jk"]
[ext_resource type="PackedScene" uid="uid://c4gbwnro3xm6l" path="res://interactables/pressure_plate/pressure_plate.tscn" id="6_wpdhg"]
[ext_resource type="PackedScene" uid="uid://db7joti4kmn1i" path="res://interactables/door/door.tscn" id="7_bmdrv"]
[ext_resource type="PackedScene" uid="uid://daxt844i4rpgq" path="res://interactables/chest/chest.tscn" id="8_odghe"]
[ext_resource type="PackedScene" uid="uid://e4tntiw4ikmi" path="res://interactables/door/door_key.tscn" id="9_l30ot"]
[ext_resource type="PackedScene" uid="uid://co8rl8y7n4vyg" path="res://interactables/bridge/bridge.tscn" id="10_mbx12"]
[ext_resource type="PackedScene" uid="uid://bvw41agncdalm" path="res://interactables/pushable_objects/pushable_crate.tscn" id="11_03n3g"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_m6nkq"]
texture = ExtResource("1_txqch")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(64, -64, 64, 64, -64, 64)
1:0/0 = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
2:0/0 = 0
2:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, 64, -64, 64)
3:0/0 = 0
3:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:0/0/physics_layer_0/angular_velocity = 0.0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -17.3241, 64, -64, -9.8995)
0:1/0 = 0
0:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:1/0/physics_layer_0/angular_velocity = 0.0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
1:1/0 = 0
1:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:1/0/physics_layer_0/angular_velocity = 0.0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
2:1/0 = 0
2:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:1/0/physics_layer_0/angular_velocity = 0.0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
3:1/0 = 0
3:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:1/0/physics_layer_0/angular_velocity = 0.0
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, -20, 24, 64, -64, 64)
0:2/0 = 0
0:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:2/0/physics_layer_0/angular_velocity = 0.0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-33, -13.5, -19, -64, 64, -64, 64, 64, -19.5, 64, -34, 23.5)
1:2/0 = 0
1:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:2/0/physics_layer_0/angular_velocity = 0.0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
2:2/0 = 0
2:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:2/0/physics_layer_0/angular_velocity = 0.0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
3:2/0 = 0
3:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:2/0/physics_layer_0/angular_velocity = 0.0
3:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
0:3/0 = 0
0:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:3/0/physics_layer_0/angular_velocity = 0.0
0:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 17.5, -64, 32.5, -7, 28.5, 34, 14.5, 64, -64, 64)

[sub_resource type="TileSet" id="TileSet_ftdnd"]
tile_size = Vector2i(128, 128)
physics_layer_0/collision_layer = 1
physics_layer_0/collision_mask = 0
sources/0 = SubResource("TileSetAtlasSource_m6nkq")

[node name="Level_01" type="Node2D" node_paths=PackedStringArray("players_container", "spawns", "door_key")]
script = ExtResource("1_dd17a")
players_container = NodePath("----- Players -----/PlayersContainer")
player_scenes = Array[PackedScene]([ExtResource("2_8ws6k"), ExtResource("3_0go4c")])
spawns = [NodePath("----- Players -----/Spawn1"), NodePath("----- Players -----/Spawn2")]
door_key = NodePath("----- Interactables -----/DoorKey")

[node name="----- Environment -----" type="Node" parent="."]

[node name="TileMap" type="TileMap" parent="----- Environment -----"]
position = Vector2(2.08165e-12, 500)
scale = Vector2(0.5, 0.5)
tile_set = SubResource("TileSet_ftdnd")
format = 2
layer_0/tile_data = PackedInt32Array(196609, 131072, 2, 196610, 131072, 2, 196611, 131072, 2, 196612, 131072, 2, 196613, 131072, 2, 196614, 131072, 2, 196615, 131072, 2, 196616, 131072, 2, 131080, 0, 2, 65544, 0, 2, 8, 0, 2, -65528, 196608, 0, 196608, 131072, 2, -65527, 65536, 0, -65526, 65536, 0, -65525, 65536, 0, -65524, 65536, 0, -65523, 65536, 0, 9, 65536, 1, 65545, 65536, 1, 131081, 65536, 1, 10, 65536, 1, 65546, 65536, 1, 131082, 65536, 1, 11, 65536, 1, 65547, 65536, 1, 131083, 65536, 1, 12, 65536, 1, 65548, 65536, 1, 131084, 65536, 1, 13, 65536, 1, 65549, 65536, 1, 131085, 65536, 1, -65522, 131072, 0, 15, 131072, 0, 65552, 131072, 0, 131089, 131072, 0, 14, 65536, 1, 65550, 65536, 1, 65551, 65536, 1, 131087, 65536, 1, 131086, 65536, 1, 131088, 65536, 1, 196617, 131072, 2, 196618, 131072, 2, 196619, 131072, 2, 196620, 131072, 2, 196621, 131072, 2, 196622, 131072, 2, 196623, 131072, 2, 196624, 131072, 2, 196625, 131072, 2, 196626, 131072, 2, 196627, 131072, 2, 196628, 131072, 2, 196629, 131072, 2, 196630, 131072, 2, 196631, 131072, 2, 196632, 131072, 2, 196633, 131072, 2, 196634, 131072, 2, 196635, 131072, 2, 262137, 131072, 2, 262138, 131072, 2, 262139, 131072, 2, 262140, 131072, 2, 262141, 131072, 2, 262142, 131072, 2, 262143, 131072, 2, 262136, 131072, 2, 196636, 131072, 2, 196637, 131072, 2, 196638, 131072, 2, 196639, 131072, 2, 196640, 131072, 2, 196641, 131072, 2, 196642, 131072, 2, 196643, 131072, 2, 196644, 131072, 2, 196645, 131072, 2, 196646, 131072, 2, 262135, 131072, 2, 262134, 131072, 2, 262133, 131072, 2, 262132, 131072, 2, 262131, 131072, 2, 262130, 131072, 2, 262129, 131072, 2, 262128, 131072, 2, 262127, 131072, 2, 262126, 131072, 2, 131105, 65536, 1, 131106, 65536, 1, 131107, 65536, 1, 131108, 65536, 1, 131109, 65536, 1, 131110, 65536, 1, -262111, 65536, 1, -196575, 65536, 1, -131039, 65536, 1, -65503, 65536, 1, 33, 65536, 1, 65569, 65536, 1, -262110, 65536, 1, -196574, 65536, 1, -131038, 65536, 1, -65502, 65536, 1, 34, 65536, 1, 65570, 65536, 1, -262109, 65536, 1, -196573, 65536, 1, -131037, 65536, 1, -65501, 65536, 1, 35, 65536, 1, 65571, 65536, 1, -262108, 65536, 1, -196572, 65536, 1, -131036, 65536, 1, -65500, 65536, 1, 36, 65536, 1, 65572, 65536, 1, -262107, 65536, 1, -196571, 65536, 1, -131035, 65536, 1, -65499, 65536, 1, 37, 65536, 1, 65573, 65536, 1, -262106, 65536, 1, -196570, 65536, 1, -131034, 65536, 1, -65498, 65536, 1, 38, 65536, 1, 65574, 65536, 1, -524255, 65536, 1, -458719, 65536, 1, -393183, 65536, 1, -327647, 65536, 1, -524254, 65536, 1, -458718, 65536, 1, -393182, 65536, 1, -327646, 65536, 1, -524253, 65536, 1, -458717, 65536, 1, -393181, 65536, 1, -327645, 65536, 1, -524252, 65536, 1, -458716, 65536, 1, -393180, 65536, 1, -327644, 65536, 1, -524251, 65536, 1, -458715, 65536, 1, -393179, 65536, 1, -327643, 65536, 1, -524250, 65536, 1, -458714, 65536, 1, -393178, 65536, 1, -327642, 65536, 1, -524249, 65536, 1, -458713, 65536, 1, -393177, 65536, 1, -327641, 65536, 1, -262105, 65536, 1, -196569, 65536, 1, -131033, 65536, 1, -65497, 65536, 1, 39, 65536, 1, 65575, 65536, 1, 131111, 65536, 1, -524248, 65536, 1, -458712, 65536, 1, -393176, 65536, 1, -327640, 65536, 1, -262104, 65536, 1, -196568, 65536, 1, -131032, 65536, 1, -65496, 65536, 1, 40, 65536, 1, 65576, 65536, 1, 131112, 65536, 1, -524247, 65536, 1, -458711, 65536, 1, -393175, 65536, 1, -327639, 65536, 1, -262103, 65536, 1, -196567, 65536, 1, -131031, 65536, 1, -65495, 65536, 1, 41, 65536, 1, 65577, 65536, 1, 131113, 65536, 1, -524246, 65536, 1, -458710, 65536, 1, -393174, 65536, 1, -327638, 65536, 1, -262102, 65536, 1, -196566, 65536, 1, -131030, 65536, 1, -65494, 65536, 1, 42, 65536, 1, 65578, 65536, 1, 131114, 65536, 1, -524245, 65536, 1, -458709, 65536, 1, -393173, 65536, 1, -327637, 65536, 1, -262101, 65536, 1, -196565, 65536, 1, -131029, 65536, 1, -65493, 65536, 1, 43, 65536, 1, 65579, 65536, 1, 131115, 65536, 1, 196647, 131072, 2, 196648, 131072, 2, 196649, 131072, 2, 196650, 131072, 2, 196651, 131072, 2, -524256, 0, 2, -458720, 0, 2, -393184, 0, 2, -327648, 0, 2, -262112, 0, 2, -196576, 0, 2, -131040, 0, 2, -589792, 65536, 1, -589791, 65536, 1, -589790, 65536, 1, -589789, 65536, 1, -589788, 65536, 1, -589787, 65536, 1, -589786, 65536, 1, -589785, 65536, 1, -589784, 65536, 1, -589783, 65536, 1, -589782, 65536, 1, -589781, 65536, 1, -524296, 65536, 1, -524295, 65536, 1, -524294, 65536, 1, -524293, 65536, 1, -524292, 65536, 1, -524291, 65536, 1, -524290, 65536, 1, -524289, 65536, 1, -589824, 65536, 1, -589823, 65536, 1, -589822, 65536, 1, -589821, 65536, 1, -589820, 65536, 1, -589819, 65536, 1, -589818, 65536, 1, -589817, 65536, 1, -589816, 65536, 1, -589815, 65536, 1, -589814, 65536, 1, -589813, 65536, 1, -589812, 65536, 1, -589811, 65536, 1, -589810, 65536, 1, -589809, 65536, 1, -589808, 65536, 1, -589807, 65536, 1, -589806, 65536, 1, -589805, 65536, 1, -589804, 65536, 1, -589803, 65536, 1, -589802, 65536, 1, -589801, 65536, 1, -589800, 65536, 1, -589799, 65536, 1, -589798, 65536, 1, -589797, 65536, 1, -589796, 65536, 1, -589795, 65536, 1, -589794, 65536, 1, -589793, 65536, 1, -524306, 65536, 1, -524305, 65536, 1, -524304, 65536, 1, -524303, 65536, 1, -524302, 65536, 1, -524301, 65536, 1, -524300, 65536, 1, -524299, 65536, 1, -524298, 65536, 1, -524297, 65536, 1, -524310, 65536, 1, -524309, 65536, 1, -524308, 65536, 1, -524307, 65536, 1, 262122, 131072, 2, 262123, 131072, 2, 262124, 131072, 2, 262125, 131072, 2, 262121, 131072, 2, 262120, 131072, 2, 262119, 131072, 2, 262118, 131072, 2, 262117, 131072, 2, 262116, 131072, 2, 262115, 131072, 2, 262114, 131072, 2, 262113, 131072, 2, 262112, 131072, 2, 262111, 131072, 2, 262110, 131072, 2, 262109, 131072, 2, 262108, 131072, 2, 262107, 131072, 2, 262106, 131072, 2, 262105, 131072, 2, 262104, 131072, 2, -524328, 65536, 1, -524327, 65536, 1, -524326, 65536, 1, -524325, 65536, 1, -524324, 65536, 1, -524323, 65536, 1, -524322, 65536, 1, -524321, 65536, 1, -524320, 65536, 1, -524319, 65536, 1, -524318, 65536, 1, -524317, 65536, 1, -524316, 65536, 1, -524315, 65536, 1, -524314, 65536, 1, -524313, 65536, 1, -524312, 65536, 1, -524311, 65536, 1, -458792, 65536, 1, -393256, 65536, 1, -327720, 65536, 1, -262184, 65536, 1, -196648, 65536, 1, -131112, 65536, 1, -65576, 65536, 1, -40, 65536, 1, 65496, 65536, 1, 131032, 65536, 1, 196568, 65536, 1, -458791, 65536, 1, -393255, 65536, 1, -327719, 65536, 1, -262183, 65536, 1, -196647, 65536, 1, -131111, 65536, 1, -65575, 65536, 1, -39, 65536, 1, 65497, 65536, 1, 131033, 65536, 1, 196569, 65536, 1, -458790, 65536, 1, -393254, 65536, 1, -327718, 65536, 1, -262182, 65536, 1, -196646, 65536, 1, -131110, 65536, 1, -65574, 65536, 1, -38, 65536, 1, 65498, 65536, 1, 131034, 65536, 1, 196570, 65536, 1, -458789, 65536, 1, -393253, 65536, 1, -327717, 65536, 1, -262181, 65536, 1, -196645, 65536, 1, -131109, 65536, 1, -65573, 65536, 1, -37, 65536, 1, 65499, 65536, 1, 131035, 65536, 1, 196571, 65536, 1, -458788, 65536, 1, -393252, 65536, 1, -327716, 65536, 1, -262180, 65536, 1, -196644, 65536, 1, -131108, 65536, 1, -65572, 65536, 1, -36, 65536, 1, 65500, 65536, 1, 131036, 65536, 1, 196572, 65536, 1, -458787, 65536, 1, -393251, 65536, 1, -327715, 65536, 1, -262179, 65536, 1, -196643, 65536, 1, -131107, 65536, 1, -65571, 65536, 1, -35, 65536, 1, 65501, 65536, 1, 131037, 65536, 1, 196573, 65536, 1, -458786, 65536, 1, -393250, 65536, 1, -327714, 65536, 1, -262178, 65536, 1, -196642, 65536, 1, -131106, 65536, 1, -65570, 65536, 1, -34, 65536, 1, 65502, 65536, 1, 131038, 65536, 1, 196574, 65536, 1, -458785, 65536, 1, -393249, 65536, 1, -327713, 65536, 1, -262177, 65536, 1, -196641, 65536, 1, -131105, 65536, 1, -65569, 65536, 1, -33, 65536, 1, 65503, 65536, 1, 131039, 65536, 1, 196575, 65536, 1, -458784, 65536, 1, -393248, 65536, 1, -327712, 65536, 1, -262176, 65536, 1, -196640, 65536, 1, -131104, 65536, 1, -65568, 65536, 1, -32, 65536, 1, 65504, 65536, 1, 131040, 65536, 1, 196576, 65536, 1, -458783, 65536, 1, -393247, 65536, 1, -327711, 65536, 1, -262175, 65536, 1, -196639, 65536, 1, -131103, 65536, 1, -65567, 65536, 1, -31, 65536, 1, 65505, 65536, 1, 131041, 65536, 1, 196577, 65536, 1, -458782, 65536, 1, -393246, 65536, 1, -327710, 65536, 1, -262174, 65536, 1, -196638, 65536, 1, -131102, 65536, 1, -65566, 65536, 1, -30, 65536, 1, 65506, 65536, 1, 131042, 65536, 1, 196578, 65536, 1, -458781, 0, 3, -393245, 0, 3, -327709, 0, 3, -262173, 0, 3, -196637, 0, 3, 65507, 65536, 1, 131043, 65536, 1, 196579, 65536, 1, -29, 65536, 1, 65508, 65536, 1, 65509, 65536, 1, 65510, 65536, 1, 65511, 65536, 1, -25, 65536, 1, -26, 65536, 1, -27, 65536, 1, -28, 65536, 1, -65564, 65536, 0, -65563, 65536, 0, -65562, 65536, 0, -65561, 65536, 0, -131101, 0, 3, -65565, 131072, 1, -24, 0, 3, 65512, 0, 3, -65560, 196608, 1, -65504, 0, 1, 32, 65536, 1, 65568, 65536, 1, 131104, 65536, 1, -65505, 65536, 0, -65506, 65536, 0, -65507, 65536, 0, -65516, 65536, 0, -65517, 196608, 0, -65515, 65536, 0, -65514, 196608, 1, -65508, 196608, 0)

[node name="ParallaxBackground" type="ParallaxBackground" parent="----- Environment -----"]

[node name="ParallaxLayer" type="ParallaxLayer" parent="----- Environment -----/ParallaxBackground"]
position = Vector2(2.08165e-12, 2.08165e-12)
motion_scale = Vector2(0.1, 0.1)
motion_mirroring = Vector2(1334, 2.08165e-12)

[node name="BackgroundTrees" type="Sprite2D" parent="----- Environment -----/ParallaxBackground/ParallaxLayer"]
texture = ExtResource("2_6ek4l")
centered = false

[node name="ParallaxLayer2" type="ParallaxLayer" parent="----- Environment -----/ParallaxBackground"]
motion_scale = Vector2(0.5, 0.5)
motion_mirroring = Vector2(1334, 2.08165e-12)

[node name="BackgroundCastle" type="Sprite2D" parent="----- Environment -----/ParallaxBackground/ParallaxLayer2"]
texture = ExtResource("3_oa6jk")
centered = false

[node name="----- Interactables -----" type="Node" parent="."]

[node name="DoorPlate" parent="----- Interactables -----" instance=ExtResource("6_wpdhg")]
z_index = -100
position = Vector2(-1730, 367)

[node name="BridgePlate1" parent="----- Interactables -----" instance=ExtResource("6_wpdhg")]
z_index = -100
position = Vector2(1430, 432)

[node name="BridgePlate2" parent="----- Interactables -----" instance=ExtResource("6_wpdhg")]
z_index = -100
position = Vector2(1265, 432)

[node name="Door" parent="----- Interactables -----" instance=ExtResource("7_bmdrv")]
position = Vector2(-1494, 694)

[node name="DoorKey" parent="----- Interactables -----" instance=ExtResource("9_l30ot")]
position = Vector2(431, 693)

[node name="Chest" parent="----- Interactables -----" instance=ExtResource("8_odghe")]
position = Vector2(190, 694)
scale = Vector2(-1, 1)

[node name="Bridge" parent="----- Interactables -----" instance=ExtResource("10_mbx12")]
position = Vector2(1634, 469)

[node name="PushableCrate" parent="----- Interactables -----" instance=ExtResource("11_03n3g")]
position = Vector2(598, 406)

[node name="----- Players -----" type="Node" parent="."]

[node name="PlayersContainer" type="Node2D" parent="----- Players -----"]

[node name="Spawn1" type="Node2D" parent="----- Players -----"]
position = Vector2(59, 681)

[node name="Spawn2" type="Node2D" parent="----- Players -----"]
position = Vector2(-212, 678)

[node name="PlayerSpawner" type="MultiplayerSpawner" parent="----- Players -----"]
_spawnable_scenes = PackedStringArray("res://player/elf/elf.tscn", "res://player/knight/knight.tscn")
spawn_path = NodePath("../PlayersContainer")
spawn_limit = 2

[connection signal="toggle" from="----- Interactables -----/DoorPlate" to="----- Interactables -----/Door" method="activate"]
[connection signal="toggle" from="----- Interactables -----/BridgePlate1" to="----- Interactables -----/Bridge" method="activate"]
[connection signal="toggle" from="----- Interactables -----/BridgePlate2" to="----- Interactables -----/Bridge" method="activate"]
